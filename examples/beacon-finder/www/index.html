<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="viewport" content="width=device-width, user-scalable=no,
			initial-scale=1, maximum-scale=1, minimum-scale=1" />
		<link rel="stylesheet" href="css/app.css" />
		<title>Beacon Finder</title>
		<script>
		if (window.hyper) { console.log = hyper.log; }
		</script>
	</head>
	<body>

		<div id="id-screen-home" class="style-screen">
			<div class="style-heading-big style-color-purple">Beacon Finder</div>
			<div id="id-screen-home-button-scan-beacons"
				class="style-button style-color-blueberry">Scan Beacons</div>
			<div id="id-screen-home-button-range-beacons"
				class="style-button style-color-purple">Range Beacons</div>
			<div id="id-screen-home-button-monitor-regions"
				class="style-button style-color-pink">Monitor Regions</div>
			<div id="id-screen-home-button-range-nearables"
				class="style-button style-color-purple">Range Nearables</div>
			<div id="id-screen-home-button-monitor-nearables"
				class="style-button style-color-pink">Monitor Nearables</div>
			<div id="id-screen-home-button-back"
				class="style-button-back style-color-blueberry">Back</div>
			<!-- 
				You can use Evothings Workbench to develop HTML/JavaScript code with
				a fast workflow. Uncomment the button below and replace the Connect
				address of the Workbench. Then tap the button to connect. Drag this
				file into the Workbench window and press RUN. You now have live
				reload enabled, just save the code in your editor and the app reloads. 
			-->

			<div class="style-button style-color-yellow"
				ontouchend="window.location.replace('http://192.168.43.131:4042')">Connect</div>
			
		</div>

		<div id="id-screen-scan-beacons" class="style-screen">
			<div class="style-heading-small style-color-purple">Scanning Beacons</div>
			<div class="style-button-back style-color-blueberry">Back</div>
			<div class="style-beacon-list"></div>
		</div>

		<div id="id-screen-range-beacons" class="style-screen">
			<div class="style-heading-small style-color-purple">Ranging Beacons</div>
			<div class="style-button-back style-color-blueberry">Back</div>
			<div class="style-beacon-list"></div>
		</div>

		<div id="id-screen-monitor-regions" class="style-screen">
			<div class="style-heading-small style-color-purple">Monitoring Regions</div>
			<div class="style-button-back style-color-blueberry">Back</div>
			<div class="style-beacon-list"></div>
		</div>

		<div id="id-screen-range-nearables" class="style-screen">
			<div class="style-heading-small style-color-purple">Ranging Nearables</div>
			<div class="style-button-back style-color-blueberry">Back</div>
			<div class="style-beacon-list"></div>
		</div>

		<div id="id-screen-monitor-nearables" class="style-screen">
			<div class="style-heading-small style-color-purple">Monitoring Nearables</div>
			<div class="style-button-back style-color-blueberry">Back</div>
			<div class="style-beacon-list"></div>
		</div>

		<script src="cordova.js"></script>
		<script src="js/jquery-2.1.1.min.js"></script>
		<script src="js/touch.js"></script>
		<script src="js/app.js"></script>
		<script>
		// Hide back button if we referrer is empty.
		var hasReferrer = document.referrer && document.referrer != '';
		if (!hasReferrer)
		{
      		$('#id-screen-home-button-back').hide();
      	}

		// Setup touch handlers.
		evothings.touch.onTap(
			$('#id-screen-home-button-scan-beacons')[0],
			app.onStartScanningBeacons);
		evothings.touch.onTap(
			$('#id-screen-home-button-range-beacons')[0],
			app.onStartRangingBeacons);
		evothings.touch.onTap(
			$('#id-screen-home-button-monitor-regions')[0],
			app.onStartMonitoringRegions);
		evothings.touch.onTap(
			$('#id-screen-home-button-range-nearables')[0],
			app.onStartRangingNearables);
		evothings.touch.onTap(
			$('#id-screen-home-button-monitor-nearables')[0],
			app.onStartMonitoringNearables);
		evothings.touch.onTap(
			$('#id-screen-home-button-back')[0],
			app.onNavigateBack);

		evothings.touch.onTap(
			$('#id-screen-scan-beacons div.style-button-back')[0],
			app.onStopScanningBeacons);
		evothings.touch.onTap(
			$('#id-screen-range-beacons div.style-button-back')[0],
			app.onStopRangingBeacons);
		evothings.touch.onTap(
			$('#id-screen-monitor-regions div.style-button-back')[0],
			app.onStopMonitoringRegions);
		evothings.touch.onTap(
			$('#id-screen-range-nearables div.style-button-back')[0],
			app.onStopRangingNearables);
		evothings.touch.onTap(
			$('#id-screen-monitor-nearables div.style-button-back')[0],
			app.onStopMonitoringNearables);

		// Hide buttons on Android.
		var isAndroid =
			navigator.userAgent.match(/Android/) ||
			navigator.userAgent.match(/android/);
		if (isAndroid)
		{
      		$('#id-screen-home-button-scan-beacons').hide();
      		$('#id-screen-home-button-range-nearables').hide();
      		$('#id-screen-home-button-monitor-nearables').hide();
      	}
		</script>

	</body>
</html>
